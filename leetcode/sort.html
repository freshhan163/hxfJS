<!DOCTYPE html>
    <html>
        <head>
            <meta charset="UTF-8">
            <title>排序算法实战</title>
            <style type="text/css"></style>
            <script type="text/javascript">
                // 冒泡
                function bubbleSort(arr) {
                    let len = arr.length;
                    if (len <= 0) {
                        return [];
                    }
                    let results = [];
                    // 从大到小排列
                    for (let i = 0; i < len; i++) {
                        let swaped = false;
                        for (let j = i + 1; j < len; j++) {
                            if (arr[i] < arr[j]) {
                                swaped = true;
                                let temp = arr[j];
                                arr[j] = arr[i];
                                arr[i] = temp;
                            }
                        }
                        if (!swaped) {
                            return arr;
                        }
                    }
                    return arr;
                }
                var a = [3, 4, 8, 2, 7];
                // console.log('冒泡排序', bubbleSort(a));

                // 插入排序，从小到大：在已经排序的元素序列中从后向前扫描，保存当前值arr[i]
                function insertSort(arr) {
                    let len = arr.length;
                    if (len <= 0) {
                        return [];
                    }
                    for (let i = 1; i < len; i++) {
                        let temp = arr[i];
                        let j = i - 1;
                        while (j >= 0 && arr[j] > temp) {
                            arr[j + 1] = arr[j];
                            --j;
                        }
                        arr[j + 1] = temp;
                    }
                    console.log('insertSort arr = ', arr);
                    return arr;
                }
                insertSort([3, 5, 1, 7]);

                // 选择排序，从小到大：选择最小值，交换
                function chooseSort(arr) {
                    let len = arr.length;
                    if (len <= 0) {
                        return [];
                    }
                    let minIndex, temp;
                    for (let i = 0; i < len; i++) {
                        minIndex = i;
                        for (let j = i + 1; j < len; j++) {
                            if (arr[minIndex] > arr[j]) {
                                minIndex = j;
                                console.log('minIndex = ', minIndex);
                            }
                        }
                        temp = arr[i];
                        arr[i] = arr[minIndex];
                        arr[minIndex] = temp;
                    }
                    console.log('results = ', arr);
                    return arr;
                }
                chooseSort([3, 5, 1, 7]);

                // 归并排序：分为左右两部分，循环递归到只有一个数据
                function mergeSort(arr) {
                    let len = arr.length;
                    if (arr.length <= 1) {
                        return arr;
                    }
                    let mid = Math.floor(len / 2);
                    let leftArr = arr.slice(0, mid);
                    let rightArr = arr.slice(mid);
                    // console.log('left =', leftArr, 'right = ', rightArr);
                    return mergeSortInner(mergeSort(leftArr), mergeSort(rightArr));
                }
                function mergeSortInner(left, right) {
                    let reuslt = [];
                    while (left.length && right.length) {
                        if (left[0] <= right[0]) {
                            reuslt.push(left.shift());
                        }
                        else {
                            reuslt.push(right.shift());
                        }
                    }
                    while (left.length) {
                        reuslt.push(left.shift());
                    }
                    while (right.length) {
                        reuslt.push(right.shift());
                    }
                    console.log('归并排序耗时', reuslt);
                    return reuslt;
                }
                console.log(mergeSort([3, 5, 1, 7, 2]));

                // 快速排序
                function quickSort(arr) {
                    let len = arr.length;
                    if (arr.length <= 1) {
                        return arr;
                    }
                    let privotIndex = Math.floor(len / 2);
                    let pivot = arr.splice(privotIndex, 1)[0];
                    let left = [];
                    let right = [];
                    for (let i = 0; i < arr.length; i++) {
                        if (arr[i] < pivot) {
                            left.push(arr[i]);
                        }
                        else {
                            right.push(arr[i]);
                        }
                    }
                    return quickSort(left).concat([pivot], quickSort(right));
                    // return quickSort(left).concat(pivot, quickSort(right));
                }
                console.log('快速排序 quickSort = ', quickSort([3, 5, 2, 4, 7, 1]));
                (function() {
                    var a1 = b1 = 3;
                    var c1 = 2;
                })();
                console.log('typeof a1 = ',typeof a1); // referenceError
                // console.log('a1 = ', a1); // referenceError
                console.log('b1 = ', b1);
                // console.log('c1 = ', c1); // referenceError
            </script>
        </head>
        <body>
            <h2>排序算法</h2>
        </body>
        <script>
            document.getElementById('a').addEventListener('click', function(e) {
                console.log('target:' + e.target.id + ' &currentTarget:' + e.currentTarget.id);
            });
            document.getElementById('b').addEventListener('click', function(e) {
                console.log('target:' + e.target.id + ' currentTarget:' + e.currentTarget.id);
            });
            document.getElementById('c').addEventListener('click', function(e) {
                console.log('target:' + e.target.id + ' currentTarget:' + e.currentTarget.id);
            });
            document.getElementById('d').addEventListener('click', function(e) {
                console.log('target:' + e.target.id + ' currentTarget:' + e.currentTarget.id);
            });
            // 归并排序
            var merge = function(intervals) {
                let len = intervals.length;
                if (len <= 1) {
                    return intervals;
                }
                intervals.sort(sortArr);
                console.log('ingervals = ', intervals);
                let result = [];
                // 暴力
                for (let i = 0; i < len;) {
                    let temp = intervals[i];
                    let tempIndex = i;
                    // console.log('i = ', i, 'temp = ', temp);
                    for (let j = i + 1; j < len; j++) {
                        let left = Math.min(temp[0], intervals[j][0]);
                        let right = Math.max(temp[1], intervals[j][1]);
                        if (left <= right) {
                            temp = [left, right];
                            tempIndex = j;
                        }
                        // if (temp[1] >= intervals[j][0] && temp[0] < intervals[j][1]) {
                        // }
                        else {
                            break;
                        }
                    }
                    result.push(temp);
                    i = tempIndex + 1;
                }
                // 递归
                // if (intervals[0][1] > intervals[1][0]) {
                //     intervals.splice(0, 2, [intervals[0][0], intervals[1][1]])
                //     result = merge(intervals);
                // }
                // else {
                //     console.log('result = ', result);
                //     return result;
                // }
                // for (let i = 0; i < len - 1;) {

                // }
                console.log('result = ', result);
                return result;
            };
            var sortArr = function(a, b) {
                return a[0] - b[0];
            }
            // merge([[1,3],[2,6],[3, 7], [8,10],[15,18]]);
            // merge([[1,3], [15,18]]);
            // merge([[1, 4], [0, 4]]);
            merge([[1, 4], [0, 0]]);
            // merge([[1, 4], [0, 1]]);
            // merge([[2,3],[4,5],[6,7],[8,9],[1,10]]);

        </script>
    </html>